{"version":3,"sources":["webpack:///./js/utilities.js","webpack:///./js/zoominout.js"],"names":["Utilities","e","canvas","offsetX","offsetY","mousePositionX","mousePositionY","html","document","body","parentNode","upperCanvas","offsetParent","undefined","offsetLeft","offsetTop","stylePaddingLeft","parseInt","defaultView","getComputedStyle","paddingLeft","stylePaddingTop","paddingTop","styleBorderLeft","borderLeftWidth","styleBorderTop","borderTopWidth","pageX","pageY","x","y","Math","log","ZoomInOut","setZoom","zoom","zoomStep","CANVAS_PROPERTIES","newZoom","CANVAS_STATE","maxZoom","minZoom","zoomDifference","console","docWidth","width","docHeight","height","zoomSteps","getBaseLog","canvasCenterX","canvasCenterY","stepToCenterX","stepToCenterY","center","translateX","translateY","canvasClearParam","ctx","scale","translate","Editor","canvasUpdate","viewPort","topLeft","bottomRight","draggable","round"],"mappings":"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","file":"1.bundle.js","sourcesContent":["export default class Utilities {\r\n  static checkMousePosition(e, canvas) {\r\n    let offsetX = 0;\r\n    let offsetY = 0;\r\n    let mousePositionX;\r\n    let mousePositionY;\r\n    const html = document.body.parentNode;\r\n    let upperCanvas = canvas.upperCanvas;\r\n    if (upperCanvas.offsetParent !== undefined) {\r\n      do {\r\n        offsetX += upperCanvas.offsetLeft;\r\n        offsetY += upperCanvas.offsetTop;\r\n      } while ((upperCanvas = upperCanvas.offsetParent));\r\n    }\r\n    upperCanvas = canvas.upperCanvas;\r\n    const stylePaddingLeft = parseInt(document.defaultView.getComputedStyle(upperCanvas)\r\n      .paddingLeft, 10) || 0;\r\n    const stylePaddingTop = parseInt(document.defaultView.getComputedStyle(upperCanvas)\r\n      .paddingTop, 10) || 0;\r\n    const styleBorderLeft = parseInt(document.defaultView.getComputedStyle(upperCanvas)\r\n      .borderLeftWidth, 10) || 0;\r\n    const styleBorderTop = parseInt(document.defaultView.getComputedStyle(upperCanvas)\r\n      .borderTopWidth, 10) || 0;\r\n\r\n    offsetX += stylePaddingLeft\r\n      + styleBorderLeft\r\n      + html.offsetLeft;\r\n    offsetY += stylePaddingTop\r\n      + styleBorderTop\r\n      + html.offsetTop;\r\n    mousePositionX = e.pageX - offsetX;\r\n    mousePositionY = e.pageY - offsetY;\r\n    return { x: mousePositionX, y: mousePositionY };\r\n  }\r\n\r\n  static getBaseLog(x, y) {\r\n    return Math.log(y) / Math.log(x);\r\n  }\r\n}\r\n","import { CANVAS_PROPERTIES, CANVAS_STATE } from './globals';\r\nimport Editor from './editor';\r\nimport Utilities from './utilities';\r\n\r\nexport default class ZoomInOut {\r\n  static canvasZoomIn(e, canvas) {\r\n    ZoomInOut.setZoom(1, canvas);\r\n  }\r\n\r\n  static canvasZoomOut(e, canvas) {\r\n    ZoomInOut.setZoom(0, canvas);\r\n  }\r\n\r\n  static setZoom(zoom, canvas) {\r\n    let zoomStep;\r\n    if (zoom === 1) {\r\n      zoomStep = CANVAS_PROPERTIES.zoom.zoomStep;\r\n    } else if (zoom === 0) {\r\n      zoomStep = 1 / CANVAS_PROPERTIES.zoom.zoomStep;\r\n    }\r\n    const newZoom = CANVAS_STATE.canvas.zoom * zoomStep;\r\n    if (newZoom > CANVAS_PROPERTIES.zoom.maxZoom || newZoom < CANVAS_PROPERTIES.zoom.minZoom) {\r\n      return;\r\n    }\r\n    const zoomDifference = newZoom - CANVAS_STATE.canvas.zoom;\r\n    console.log(newZoom);\r\n    const docWidth = CANVAS_STATE.canvas.width * zoomStep;\r\n    const docHeight = CANVAS_STATE.canvas.height * zoomStep;\r\n    let zoomSteps = Utilities.getBaseLog(\r\n      CANVAS_PROPERTIES.zoom.zoomStep,\r\n      CANVAS_STATE.canvas.zoom,\r\n    );\r\n    zoomSteps = zoomSteps === 0 ? 1 : zoomSteps;\r\n    const canvasCenterX = CANVAS_PROPERTIES.document.width / 2;\r\n    const canvasCenterY = CANVAS_PROPERTIES.document.height / 2;\r\n    let stepToCenterX = 0;\r\n    let stepToCenterY = 0;\r\n    if (canvasCenterX !== CANVAS_STATE.canvas.center.x) {\r\n      stepToCenterX = (CANVAS_STATE.canvas.center.x - canvasCenterX) / zoomSteps;\r\n      CANVAS_STATE.canvas.center.x -= stepToCenterX;\r\n    }\r\n    if (canvasCenterY !== CANVAS_STATE.canvas.center.y) {\r\n      stepToCenterY = (CANVAS_STATE.canvas.center.y - canvasCenterY) / zoomSteps;\r\n      CANVAS_STATE.canvas.center.y -= stepToCenterY;\r\n    }\r\n\r\n    const translateX = (\r\n      -(\r\n        CANVAS_PROPERTIES.document.width / 2 * zoomDifference / newZoom - stepToCenterX\r\n      )\r\n    );\r\n    const translateY = (\r\n      -(\r\n        CANVAS_PROPERTIES.document.height / 2 * zoomDifference / newZoom - stepToCenterY\r\n      )\r\n    );\r\n    const canvasClearParam = {\r\n      x: 0,\r\n      y: 0,\r\n      width: CANVAS_PROPERTIES.document.width,\r\n      height: CANVAS_PROPERTIES.document.height,\r\n    };\r\n\r\n    canvas.upperCanvas.ctx.scale(zoomStep, zoomStep);\r\n    canvas.upperCanvas.ctx.translate(translateX, translateY);\r\n    Editor.canvasUpdate(canvas.upperCanvas, false, canvasClearParam);\r\n\r\n    canvas.canvas.ctx.scale(zoomStep, zoomStep);\r\n    canvas.canvas.ctx.translate(translateX, translateY);\r\n    Editor.canvasUpdate(canvas.canvas, true, canvasClearParam);\r\n\r\n    CANVAS_STATE.canvas.zoom = newZoom;\r\n    if (zoom === 1) {\r\n      CANVAS_STATE.canvas.viewPort.topLeft.x -= (docWidth - CANVAS_STATE.canvas.width) / 2;\r\n      CANVAS_STATE.canvas.viewPort.topLeft.y -= (docHeight - CANVAS_STATE.canvas.height) / 2;\r\n      CANVAS_STATE.canvas.viewPort.bottomRight.x += (docWidth - CANVAS_STATE.canvas.width) / 2;\r\n      CANVAS_STATE.canvas.viewPort.bottomRight.y += (docHeight - CANVAS_STATE.canvas.height) / 2;\r\n    } else if (zoom === 0) {\r\n      CANVAS_STATE.canvas.viewPort.topLeft.x += (docWidth - CANVAS_STATE.canvas.width) / 2;\r\n      CANVAS_STATE.canvas.viewPort.topLeft.y += (docHeight - CANVAS_STATE.canvas.height) / 2;\r\n      CANVAS_STATE.canvas.viewPort.bottomRight.x -= (docWidth - CANVAS_STATE.canvas.width) / 2;\r\n      CANVAS_STATE.canvas.viewPort.bottomRight.y -= (docHeight - CANVAS_STATE.canvas.height) / 2;\r\n    }\r\n    CANVAS_STATE.canvas.width = docWidth;\r\n    CANVAS_STATE.canvas.height = docHeight;\r\n\r\n    CANVAS_STATE.canvas.draggable = canvas.canvas.width < Math.round(CANVAS_STATE.canvas.width)\r\n      || canvas.canvas.height < Math.round(CANVAS_STATE.canvas.height);\r\n  }\r\n}\r\n"],"sourceRoot":""}